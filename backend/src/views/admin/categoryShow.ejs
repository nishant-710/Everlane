<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Categories</title>
  </head>
  <body
    style="margin: 0; font-family: Arial, sans-serif; background-color: #f4f6f8"
  >
    <%- include('partials/sidebar') %>

    <div style="margin-left: 220px">
      <%- include('partials/header') %>

      <div style="padding: 30px">
        <div style="display: flex; gap: 10px; margin-bottom: 20px">
          <a href="/admin/categoryAdd">
            <button
              style="
                padding: 10px 20px;
                background-color: #27ae60;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
              "
            >
              Add
            </button>
          </a>
        </div>
        <h2 style="color: #2c3e50; text-align: center; margin-bottom: 30px">
          Categories
        </h2>

        <div
          style="
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.08);
          "
        >
          <% if (category.length > 0) { %>
          <table style="width: 100%; border-collapse: collapse">
            <thead>
              <tr style="background-color: #2c3e50; color: white">
                <th
                  style="
                    text-align: left;
                    padding: 10px;
                    border: 1px solid #ccc;
                  "
                >
                  Name
                </th>
                <th
                  style="
                    text-align: left;
                    padding: 10px;
                    border: 1px solid #ccc;
                  "
                >
                  Main Category
                </th>
                <th
                  style="
                    text-align: left;
                    padding: 10px;
                    border: 1px solid #ccc;
                  "
                >
                  Images
                </th>
                <th
                  style="
                    text-align: center;
                    padding: 10px;
                    border: 1px solid #ccc;
                  "
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody>
              <% category.forEach(cat => { %>
              <tr>
                <td
                  style="padding: 10px; border: 1px solid #ddd; color: #34495e"
                >
                  <%= cat.name %>
                </td>
                <td
                  style="padding: 10px; border: 1px solid #ddd; color: #34495e"
                >
                  <%= cat.parentData ? cat.parentData.name : 'None' %>
                </td>
                <td
                  style="padding: 10px; border: 1px solid #ddd; color: #34495e"
                >
                  <% if (cat.image && cat.image.length > 0) { %>
  <% cat.image.forEach(function(img) { %>
    <img src="/uploads/<%= img %>" style="width: 60px; height: auto; border-radius: 5px; margin-right: 5px;" alt="Product Image" />
  <% }) %>
<% } %>
                </td>
                <td
                  style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    text-align: center;
                  "
                >
                  <a
                    href="/admin/category/<%= cat._id %>/edit"
                    style="
                      padding: 6px 12px;
                      background-color: #f39c12;
                      color: white;
                      border: none;
                      border-radius: 4px;
                      cursor: pointer;
                      text-decoration: none;
                      display: inline-block;
                    "
                  >
                    Edit
                  </a>

                  <form
                    style="display: inline-block"
                    method="POST"
                    action="/admin/category/<%= cat._id%>/delete"
                  >
                    <button
                      type="submit"
                      style="
                        padding: 6px 12px;
                        background-color: #c0392b;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                      "
                      onclick="return confirm('Are You Sure??')";
                    >
                      Delete
                    </button>
                  </form>
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
          <% } else { %>
          <p style="text-align: center; color: #7f8c8d">
            No data found.
          </p>
          <% } %>
        </div>
      </div>
    </div>
  </body>
</html>
